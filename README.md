# Дипломный проект профессии «1C-программист: с нуля до middle»
 
## Описание нового функционала и инструкция по начальной настройке

### Модуль Работа с заявками клиентов

1. Добавлен новый вид договоров «Абонентское обслуживание», при создании которого появилась возможность внести период действия договора, сумму ежемесячной абонентской платы, а также стоимость часа работы специалиста.
2. Добавлен документ «Обслуживание клиента», в который вносится следующая информация:
- клиент и договор, в рамках которого необходимо провести работы;
- описание проблемы;
-  назначенный специалист, дата и время проведения работ;
- после проведения работ назначенный специалист вносит информацию о выполненных работах, фактически потраченном времени и количестве часов, которые необходимо оплатить клиенту.  Дополнительно прикрепляет к документу скан/фото подписанного листа учета рабочего времени.
3. Добавлена возможность использования телеграм-бота, который оповещает специалистов о появлении новой заявки. Оповещение содержит информацию из документа «Обслуживание клиента» о дате и времени проведения работ, а также о назначенном специалисте. Для использования данного функционала необходимо выполнить настройку бота (инструкция ниже). 
4. В документе «Реализация товаров и услуг» добавлена возможность автозаполнения табличной части Услуги в случае, если выбран вид договора «Абонентское обслуживание». Для использования данного функционала необходимо заполнить константы «Абонентская плата» и «Работы специалиста». Порядок заполнения:
- если по указанному договору предусмотрена абонентская плата, то автоматически добавляется строка с номенклатурой «Абонентская плата» из константы и суммой из договора;
- если в месяц формирования документа Реализации в рамках указанного договора выполнялись какие-либо работы по документам «Обслуживание клиента», то автоматически добавляется строка с номенклатурой «Работы специалиста» из константы, общим количеством часов и суммой, рассчитанной по стоимость часа работы специалиста (из договора), умноженной на количество часов.
Дополнительно в документе «Реализация товаров и услуг» добавлена возможность печати Акта об оказанных услугах.
5. Добавлена опция «Массовое создание актов», которая позволяет создать документы Реализации сразу по всем договорам в указанный период, если они не были созданы ранее.

------

### Модуль Расчет управленческой зарплаты:

1. Добавлен регистр «Условия оплаты сотрудников» в который необходимо внести сведения об окладах сотрудников и о размере процента премии за выполненные работы.
2. Добавлен документ «Начисление зарплаты», в котором производится расчет заработной платы указанным сотрудникам по видам расчета оклад, премия за выполненные работы, отпуск, а также производится расчет удерживаемого НДФЛ.
3. Добавлен документ «Начисление фиксированной премии», в котором производится расчет фиксированной премии указанным сотрудникам и удерживаемый НДФЛ.
4. Добавлен документ «Выплата зарплаты», фиксирующий факт выплаты сотрудникам зарплаты.  Документ имеет механизмом автоматического заполнения данными по начисленной зарплате из документов «Начисление зарплаты» и «Начисление фиксированной премии».
4. Добавлен документ «График отпусков», в котором заполняются периоды планируемых отпусков сотрудников. В случае, если общая продолжительность отпуска сотрудников более 28 дней, реализована подсветка строк с данным сотрудником. Также добавлена возможность открыть диаграмму Ганта с периодами отпусков для визуального контроля пересечений отпусков.
5. Добавлен документ «Использование отпуска», в котором фиксируются фактически использованные отпуска.

------

### Отчеты:

Добавлены следующие отчеты:
1. «Выработка специалистов» - включает количество отработанных часов и сумму процентов от выполненных работ выбранного сотрудника за выбранный период.
2. «Анализ выставленных актов» - включает информацию о клиентах, договорах и суммах, которые начислены клиентам на основе данных из документов Обслуживание, а также суммах из начисленных выше, которые фактически выставлены клиентам на основе данных из документов Реализация.
3. «Расчеты с сотрудниками» - включает информацию о том, какие суммы начислены и выплачены каждому сотруднику за указанный период, а также задолженность на начало и конец этого периода.
4. «Расход запланированных отпусков» - включает информацию о количестве запланированных и фактически использованных дней отпуска за указанный год.

------

### Профили групп доступа и роли:

Для работы с вышеуказанными документами и отчетами добавлены следующие профили групп доступа и роли, распределенные по ним, которые необходимо назначить соответствующим сотрудникам:
1. Бухгалтер ИТ-фирмы, включает следующие роли:
- массовое создание документов реализации;
- чтение отчета анализ выставленных актов.
2. Кадровик-расчетчик, включает следующие роли:
- добавление изменение документов выплаты зарплаты;
- добавление изменение документов график отпусков;
- добавление изменение документов начисления зарплаты;
- добавление изменение документов начисления фиксированной премии;
- чтение отчета выработка специалистов;
 -чтение отчета расчеты с сотрудниками;
- чтение отчета расход запланированных отпусков.
3. Менеджер, включает следующие роли:
- добавление изменение документов обслуживания клиента.
4. Специалист, включает следующие роли:
- чтение отчета выработка специалистов;
- добавление изменение документов обслуживания клиента.

------

### Инструкция по настройке телеграм-бота:

1. Создание бота:
- напишете в Телеграм https://t.me/BotFather команду "/start";
- напишите команду "/newbot";
- выберите имя вашего бота, которое будут видеть пользователи;
- выберите идентификатор вашего бота (он должен заканчиваться на "bot");
- скопируйте токен, который пришлет BotFather и сохраните его в константу «Токен управления телеграм-ботом».
2. Создание группы:
- создайте группу в Телеграм;
- добавьте в группу только что созданного бота;
- назначьте боту права администратора;
- напишите любое сообщение в группу;
- с помощью браузера выполните запрос https://api.telegram.org/bot[ВашТокен]/getUpdates. В полученном тексте найдите идентификатор группы, в которой получено сообщение, и сохраните его в константу «Идентификатор группы для оповещения».

------
